$(document).ready(function(){function e(e){$.getJSON("http://api.openweathermap.org/data/2.5/weather?id="+e+"&APPID=de3bc277144ce6d8ff3a04de56e1922c&units=metric").then(function(e){var a=$("#weather-template").html(),t=(new Date,e.main.temp),n=e.main.temp_max,r=e.main.temp_min;a=a.replace("mainweather",e.weather[0].main).replace("weathermain",e.weather[0].main).replace("currenttemp",t).replace("maxtemp",n).replace("mintemp",r),$(".weather-panel").html(a),"Clear"==e.weather[0].main?$(".weather-bg").css("background-color","#5EBCFF"):"Sunny"==e.weather[0].main?$(".weather-bg").css("background-color","#FFD759"):"Clouds"==e.weather[0].main?$(".weather-bg").css("background-color","#6D767F"):"Haze"==e.weather[0].main||"Fog"==e.weather[0].main?$(".weather-bg").css("background-color","#C2D6FF"):"Rain"==e.weather[0].main||"Drizzle"==e.weather[0].main?$(".weather-bg").css("background-color","#4295FF"):"Thunderstorm"==e.weather[0].main?$(".weather-bg").css("background-color","#59577F"):"Mist"==e.weather[0].main&&$(".weather-bg").css("background-color","#B0CFFF")},function(){console.log("error fetching data")})}function a(e){$(".dropdown .dropdown-menu").html(""),$("#city-name").html(n[e].cityName+'<span class="caret"></span>'),t=n[e].cityCode;for(var a=0;a<n.length;a++)a!=e&&$(".dropdown .dropdown-menu").append('<li class="h1" data-index='+a+">"+n[a].cityName+"</a></li>")}var t,n=[{cityName:"Bangalore",cityCode:1277333},{cityName:"Cochin",cityCode:1273874},{cityName:"New Delhi",cityCode:1273293},{cityName:"Palakkad",cityCode:1260728}];a(0),e(t),$(document).on("click",".dropdown .dropdown-menu li",function(){a($(this).data("index")),e(t)})});