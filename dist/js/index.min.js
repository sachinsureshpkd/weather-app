$(document).ready(function(){function e(e){$.getJSON("http://api.openweathermap.org/data/2.5/weather?id="+e+"&APPID=de3bc277144ce6d8ff3a04de56e1922c&units=metric").then(function(e){var a=$("#weather-template").html(),n=(new Date,e.main.temp),t=e.main.temp_max,o=e.main.temp_min;a=a.replace("mainweather",e.weather[0].main).replace("weathermain",e.weather[0].main).replace("currenttemp",n).replace("maxtemp",t).replace("mintemp",o),$(".weather-panel").html(a),"Clear"==e.weather[0].main?$(".weather-bg").css("background-color","#5EBCFF"):"Sunny"==e.weather[0].main?$(".weather-bg").css("background-color","#FFD759"):"Clouds"==e.weather[0].main?$(".weather-bg").css("background-color","#6D767F"):"Haze"==e.weather[0].main||"Fog"==e.weather[0].main?$(".weather-bg").css("background-color","#C2D6FF"):"Rain"==e.weather[0].main||"Drizzle"==e.weather[0].main?$(".weather-bg").css("background-color","#4295FF"):"Thunderstorm"==e.weather[0].main?$(".weather-bg").css("background-color","#59577F"):"Mist"==e.weather[0].main&&$(".weather-bg").css("background-color","#B0CFFF")},function(){console.log("error fetching data")})}function a(e){$(".dropdown .dropdown-menu").html(""),$("#city-name").html(t[e].cityName+'<span class="caret"></span>'),n=t[e].cityCode;for(var a=0;a<t.length;a++)a!=e&&$(".dropdown .dropdown-menu").append('<li class="h1" data-index='+a+">"+t[a].cityName+"</a></li>")}var n,t=[{cityName:"Bangalore",cityCode:1277333},{cityName:"Cochin",cityCode:1273874},{cityName:"New Delhi",cityCode:1273293},{cityName:"Palakkad",cityCode:1260728}];a(0),e(n),$(document).on("click",".dropdown .dropdown-menu li",function(){a($(this).data("index")),e(n)}),$(".dropdown").on("show.bs.dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$(".dropdown").on("hide.bs.dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()})});